<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <title>Weather Map</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.css' rel='stylesheet' />
</head>
<body>

<div id='map' style='width: 800px; height: 600px;'></div>
<div id="forecasts" class="container row">

</div>

<script type="text/javascript" src="js/jquery-2.2.4.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src='https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.js'></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css" type="text/css">
<script src="js/keys.js"></script>

<script>
"use strict";
$(document).ready(function(){

    // <<------ openweather ------>>
    $.get("https://api.openweathermap.org/data/2.5/onecall", {
        APPID: OPENWEATHER_API_KEY,
        lat: 29,
        lon: -98,
        exclude: "hourly,minutely",
        units: "imperial"
    }).done(function (data){
        // console.log(data)
        for (let i = 0; i < 5; i++) {
            console.log(data.daily[i])
            console.log(new Date(data.daily[i].dt * 1000))
            console.log(data.daily[i].temp.max)
            console.log(data.daily[i].temp.min)
            console.log(data.daily[i].weather[0].icon)
            console.log(data.daily[i].weather[0].description)
            console.log(data.daily[i].humidity)
            console.log(data.daily[i].wind_speed)
            console.log(data.daily[i].pressure)

            // var newForecastHTML = getForecast(data.daily[i]);
            // $('#forecasts').append(newForecastHTML);
        }
    });

    let forecastDate = new Date(data.daily[i].dt * 1000)
    let forecastHigh = data.daily[i].temp.max
    let forecastLow = data.daily[i].temp.min
    let forecastIcon = `https://openweathermap.org/img/wn/${data.daily[i].weather[0].icon}@2x.png`
    let forecastDesc = data.daily[i].weather[0].description
    let forecastHumidity = data.daily[i].humidity
    let forecastWinds = data.daily[i].wind_speed
    let forecastPressure = data.daily[i].pressure

//     function getForecast(data.daily[i]){
//         return `
//             <div class="col-2">
//
//             </div>
// `
//     }


    // <<--------- tools example ----------->>
//     $.ajax("/data/inventory.json").done(function(data, status, jqXhr){
//         data.forEach(function(tool){
//             var newToolHTML = getNewTool(tool);
//             $('#insertProducts').append(newToolHTML);
//         })
//     });
//
//     function getNewTool(tool){
//         return `
//             <tr>
//                 <td>${tool.title}</td>
//                 <td>${tool.quantity}</td>
//                 <td>$${tool.price}</td>
//                 <td>${tool.categories}</td>
//             </tr>
// `
//     }

    // <<--------- mapbox --------->>
    // mapboxgl.accessToken = MAPBOX_API_KEY;
    // const map = new mapboxgl.Map({
    //     container: 'map', // container ID
    //     style: 'mapbox://styles/mapbox/streets-v11', // style URL
    //     center: [-98.4916, 29.4260], // starting position [lng, lat]
    //     zoom: 10 // starting zoom
    // });
    //
    // let geoCoder = new MapboxGeocoder({
    //     accessToken: mapboxgl.accessToken,
    //     mapboxgl: mapboxgl,
    //     marker: false
    // })
    //
    // map.addControl(
    //     geoCoder
    // );
    //
    // var marker = function(point){
    //     return new mapboxgl.Marker().setLngLat(point).addTo(map);
    // }
    //
    // var popup = function(description){
    //     return new mapboxgl.Popup().setHTML(description).addTo(map);
    // }
    //
    // map.on('click', function(e){
    //     console.log(e)
    //     marker(e.result.geometry.coordinates).setPopup(popup(e.result.place_name))
    // })
});
</script>

</body>
</html>